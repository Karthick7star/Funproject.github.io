<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOTE 2024 Regulation Calculator</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f4f7f9; display: flex; justify-content: center; padding: 20px; }
        .container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); width: 100%; max-width: 600px; }
        h2 { color: #2c3e50; text-align: center; border-bottom: 2px solid #3498db; padding-bottom: 10px; margin-top: 0; }
        .tab-buttons { display: flex; gap: 5px; margin-bottom: 20px; flex-wrap: wrap; }
        button.tab { flex: 1; padding: 10px; border: none; background: #ddd; cursor: pointer; border-radius: 5px; font-weight: bold; min-width: 120px; }
        button.active { background: #3498db; color: white; }
        .input-group { margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        label { display: block; margin-bottom: 5px; font-weight: 600; color: #555; }
        input, select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; margin-bottom: 5px; }
        .row { display: flex; gap: 10px; }
        .calc-btn { width: 100%; padding: 12px; background: #27ae60; color: white; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .calc-btn:hover { background: #219150; }
        #result { margin-top: 20px; padding: 15px; border-radius: 8px; display: none; text-align: center; }
        .success { background: #e8f5e9; color: #2e7d32; border: 1px solid #c8e6c9; }
        .add-row { background: #34495e; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px; margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h2>DOTE 2024 Calculator Created by Naresh</h2>
    
    <div class="tab-buttons">
        <button class="tab active" onclick="switchTab('semester')">Semester GPA</button>
        <button class="tab" onclick="switchTab('regular')">Regular (6 Sem) %</button>
        <button class="tab" onclick="switchTab('lateral')">Lateral (4 Sem) %</button>
    </div>

    <div id="ui-description" style="font-size: 0.9em; color: #666; margin-bottom: 15px;"></div>

    <div id="inputs-container"></div>

    <div id="extra-controls"></div>

    <button class="calc-btn" onclick="calculate()">Calculate Result</button>

    <div id="result"></div>
</div>

<script>
    let currentMode = 'semester';
    const grades = { "O": 10, "A+": 9, "A": 8, "B+": 7, "B": 6, "C": 5, "RA": 0 };

    function switchTab(mode) {
        currentMode = mode;
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        event.target.classList.add('active');
        renderUI();
    }

    function renderUI() {
        const container = document.getElementById('inputs-container');
        const controls = document.getElementById('extra-controls');
        const desc = document.getElementById('ui-description');
        const resultDiv = document.getElementById('result');
        resultDiv.style.display = 'none';
        
        let html = '';
        controls.innerHTML = '';

        if (currentMode === 'semester') {
            desc.innerHTML = "Enter credits and grade for each subject in the semester.";
            html = `<div id="subject-list">` + Array(5).fill(0).map(() => getSubjectRow()).join('') + `</div>`;
            controls.innerHTML = `<button class="add-row" onclick="addSubject()">+ Add Subject</button>`;
        } else {
            const isLateral = currentMode === 'lateral';
            const count = isLateral ? 4 : 6;
            const start = isLateral ? 3 : 1;
            desc.innerHTML = `Enter the overall GPA for each semester (${isLateral ? '3-6' : '1-6'}).`;
            for (let i = 0; i < count; i++) {
                html += `
                    <div class="input-group">
                        <label>Semester ${start + i} GPA:</label>
                        <input type="number" step="0.01" class="gpa-input" placeholder="e.g. 8.5">
                    </div>`;
            }
        }
        container.innerHTML = html;
    }

    function getSubjectRow() {
        return `
            <div class="input-group subject-row">
                <div class="row">
                    <input type="number" class="sub-credit" placeholder="Credits (e.g. 3)" style="flex: 1;">
                    <select class="sub-grade" style="flex: 1;">
                        <option value="">Select Grade</option>
                        <option value="O">O (Outstanding)</option>
                        <option value="A+">A+ (Excellent)</option>
                        <option value="A">A (Very Good)</option>
                        <option value="B+">B+ (Good)</option>
                        <option value="B">B (Average)</option>
                        <option value="C">C (Satisfactory)</option>
                        <option value="RA">RA (Re-Appearance)</option>
                    </select>
                </div>
            </div>`;
    }

    function addSubject() {
        const div = document.createElement('div');
        div.innerHTML = getSubjectRow();
        document.getElementById('subject-list').appendChild(div);
    }

    function calculate() {
        const resultDiv = document.getElementById('result');
        resultDiv.style.display = 'block';
        resultDiv.className = 'success';

        if (currentMode === 'semester') {
            let totalPoints = 0, totalCredits = 0;
            document.querySelectorAll('.subject-row').forEach(row => {
                const credit = parseFloat(row.querySelector('.sub-credit').value);
                const grade = row.querySelector('.sub-grade').value;
                if (credit && grade) {
                    totalPoints += credit * grades[grade];
                    totalCredits += credit;
                }
            });
            if (totalCredits === 0) return alert("Enter valid credits and grades.");
            const gpa = (totalPoints / totalCredits).toFixed(2);
            resultDiv.innerHTML = `<strong>Semester GPA: ${gpa}</strong>`;
        } else {
            const inputs = document.querySelectorAll('.gpa-input');
            let sumGPA = 0, count = 0;
            inputs.forEach(input => {
                if(input.value) {
                    sumGPA += parseFloat(input.value);
                    count++;
                }
            });
            if (count === 0) return alert("Enter at least one semester GPA.");
            const cgpa = (sumGPA / count).toFixed(2);
            const percentage = (cgpa * 10).toFixed(2);
            resultDiv.innerHTML = `<strong>CGPA: ${cgpa}</strong><br><strong>Overall Percentage: ${percentage}%</strong>`;
        }
    }

    renderUI();
</script>

</body>
</html>
